{{!-- Layout principal --}}
<h1>⚡ Productos en Tiempo Real</h1>

<div id="productList">
  {{#each products}}
    <div class="product-card">
      <h3>{{this.title}}</h3>
      <p>Categoría: {{this.category}}</p>
      <p>Precio: ${{this.price}}</p>
      <p>Stock: {{this.stock}}</p>
    </div>
  {{/each}}
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();

  socket.on('updateProducts', (products) => {
    const container = document.getElementById('productList');
    container.innerHTML = '';
    products.forEach(p => {
      const div = document.createElement('div');
      div.classList.add('product-card');
      div.innerHTML = `
        <h3>${p.title}</h3>
        <p>Categoría: ${p.category}</p>
        <p>Precio: $${p.price}</p>
        <p>Stock: ${p.stock}</p>
      `;
      container.appendChild(div);
    });
  });
</script>

<style>
  .product-card {
    border: 1px solid #ccc;
    padding: 10px;
    margin: 6px;
    border-radius: 6px;
    background: #f9f9ff;
  }
</style>
